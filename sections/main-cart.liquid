{%- comment -%}
  Main Cart Section
  Rendered by templates/cart.json
{%- endcomment -%}

<section class="cart-section section-padding">
  <div class="container">
    <h1 class="text-center" style="margin-bottom:40px;">{{ 'general.cart.title' | t }}</h1>

    {%- if cart.item_count > 0 -%}
      <form action="{{ routes.cart_url }}" method="post">
        <table style="width:100%; border-collapse:collapse;">
          <thead>
            <tr style="border-bottom:2px solid var(--color-border);">
              <th style="text-align:left; padding:12px 0; font-size:0.8rem; text-transform:uppercase; letter-spacing:1px;">Product</th>
              <th style="text-align:center; padding:12px 0; font-size:0.8rem; text-transform:uppercase; letter-spacing:1px;">Quantity</th>
              <th style="text-align:right; padding:12px 0; font-size:0.8rem; text-transform:uppercase; letter-spacing:1px;">Total</th>
            </tr>
          </thead>
          <tbody>
            {%- for item in cart.items -%}
              <tr style="border-bottom:1px solid var(--color-border);">
                <td style="padding:20px 0;">
                  <div style="display:flex; align-items:center; gap:16px;">
                    {%- if item.image -%}
                      <img
                        src="{{ item.image | image_url: width: 120 }}"
                        alt="{{ item.image.alt | default: item.title | escape }}"
                        width="80"
                        height="100"
                        loading="lazy"
                        style="border-radius:var(--radius-sm); object-fit:cover;"
                      >
                    {%- endif -%}
                    <div>
                      <p style="font-weight:600; margin-bottom:4px;">
                        <a href="{{ item.url }}">{{ item.product.title }}</a>
                      </p>
                      {%- unless item.product.has_only_default_variant -%}
                        <p style="font-size:0.8125rem; color:#999;">{{ item.variant.title }}</p>
                      {%- endunless -%}
                      <p style="font-size:0.875rem; margin-top:4px;">{{ item.original_price | money }}</p>
                    </div>
                  </div>
                </td>
                <td style="text-align:center; padding:20px 0;">
                  <div style="display:inline-flex; align-items:center; gap:8px;">
                    <input
                      type="number"
                      name="updates[]"
                      value="{{ item.quantity }}"
                      min="0"
                      class="form-input"
                      style="width:60px; text-align:center;"
                      aria-label="{{ 'products.product.quantity' | t }}"
                    >
                  </div>
                </td>
                <td style="text-align:right; padding:20px 0; font-weight:600;">
                  {{ item.final_line_price | money }}
                </td>
              </tr>
            {%- endfor -%}
          </tbody>
        </table>

        <div style="margin-top:32px; max-width:400px; margin-left:auto;">
          <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:16px; font-size:1.125rem;">
            <span style="font-weight:600;">{{ 'general.cart.subtotal' | t }}</span>
            <span style="font-weight:700; color:var(--color-primary);">{{ cart.total_price | money }}</span>
          </div>

          <p style="font-size:0.8125rem; color:#999; margin-bottom:20px;">
            Shipping & taxes calculated at checkout.
          </p>

          <button type="submit" name="update" class="btn btn--outline btn--full" style="margin-bottom:12px;">
            {{ 'general.cart.update' | t }}
          </button>

          <button type="submit" name="checkout" class="btn btn--primary btn--full">
            {{ 'general.cart.checkout' | t }}
          </button>
        </div>
      </form>
    {%- else -%}
      <div class="cart-empty">
        <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="#ccc" stroke-width="1.5" style="margin:0 auto 16px;">
          <path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4z"></path>
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <path d="M16 10a4 4 0 01-8 0"></path>
        </svg>
        <h2 style="margin-bottom:8px;">{{ 'general.cart.empty' | t }}</h2>
        <a href="{{ routes.all_products_collection_url }}" class="btn btn--primary" style="margin-top:20px;">
          {{ 'general.cart.continue_shopping' | t }}
        </a>
      </div>
    {%- endif -%}
  </div>
</section>

{% schema %}
{
  "name": "Cart Page",
  "tag": "section",
  "class": "main-cart-section",
  "settings": []
}
{% endschema %}
